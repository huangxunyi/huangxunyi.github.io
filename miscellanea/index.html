<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>
  Miscellanea | Huangxuny1&#39;s Blog
</title>

  
  
  <link href="//cdn.jsdelivr.net" rel="dns-prefetch">
  <link href="//cdnjs.cloudflare.com" rel="dns-prefetch">
  
  <link href="//at.alicdn.com" rel="dns-prefetch">
  
  <link href="//fonts.googleapis.com" rel="dns-prefetch">
  <link href="//fonts.gstatic.com" rel="dns-prefetch">
  
  
  
  <link href="//www.google-analytics.com" rel="dns-prefetch">
  

  

  
  <meta name="author" content="Ritchie Zhu">
  <meta name="description" content="Huangxuny1&#39;s Blog  AthosZhou">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@gohugoio">
  <meta name="twitter:title" content="Huangxuny1&#39;s Blog">
  <meta name="twitter:description" content="Huangxuny1&#39;s Blog  AthosZhou">
  <meta name="twitter:image" content="/images/avatar.png">

  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Huangxuny1&#39;s Blog">
  <meta property="og:description" content="Huangxuny1&#39;s Blog  AthosZhou">
  <meta property="og:url" content="https://huangxunyi.github.io/miscellanea/">
  <meta property="og:image" content="/images/avatar.png">




<meta name="generator" content="Hugo 0.55.6">


<link rel="canonical" href="https://huangxunyi.github.io/miscellanea/">

<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no">
<meta http-equiv="Cache-Control" content="no-transform">


<meta name="robots" content="index,follow">
<meta name="referrer" content="origin-when-cross-origin">
<meta name="google-site-verification" content="_vNyE12cUaojp893wOA36F2yHRavNTQX7IoKS4d30TU">
<meta name="msvalidate.01" content="208B0E2A12DBAA8C0567BAC71B613813">





<meta name="theme-color" content="#02b875">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Huangxunyi&#39;s Blog">
<meta name="msapplication-tooltip" content="Huangxunyi&#39;s Blog">
<meta name='msapplication-navbutton-color' content="#02b875">
<meta name="msapplication-TileColor" content="#02b875">
<meta name="msapplication-TileImage" content="/icons/icon-144x144.png">
<link rel="icon" href="https://huangxunyi.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://huangxunyi.github.io/icons/icon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://huangxunyi.github.io/icons/icon-32x32.png">
<link rel="icon" sizes="192x192" href="https://huangxunyi.github.io/icons/icon-192x192.png">
<link rel="apple-touch-icon" href="https://huangxunyi.github.io/icons/icon-152x152.png">
<link rel="manifest" href="https://huangxunyi.github.io/manifest.json">


<link rel="preload" href="https://huangxunyi.github.io/styles/main-rendered.min.css" as="style">


<link rel="preload" href="https://fonts.googleapis.com/css?family=Lobster" as="style">
<link rel="preload" href="https://huangxunyi.github.io/images/avatar.png" as="image">
<link rel="preload" href="https://huangxunyi.github.io/images/grey-prism.svg" as="image">


<style>
  body {
    background: rgb(244, 243, 241) url('/images/grey-prism.svg') repeat fixed;
  }
</style>
<link rel="stylesheet" href="https://huangxunyi.github.io/styles/main-rendered.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">








  
  
<!--[if lte IE 8]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js"></script>
<![endif]-->

<!--[if lte IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js"></script>
<![endif]-->


</head>
  <body>
    <div class="suspension">
      <a role="button" aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden="true"></span></a>
      
    </div>
    
    
  <header class="site-header">
  <a href="https://huangxunyi.github.io"><img class="avatar" src="https://huangxunyi.github.io/images/avatar.png" alt="Avatar"></a>
  
  <h2 class="title"><a href="https://huangxunyi.github.io">Huangxunyi&#39;s Blog</a></h2>
  
  <p class="subtitle">~ Keep It Simple &amp; Stupid ~</p>
  <button class="menu-toggle" type="button" aria-label="Main Menu" aria-expanded="false" tab-index="0">
    <span class="icon icon-menu" aria-hidden="true"></span>
  </button>

  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
          
          
          ">
          <a href="https://huangxunyi.github.io/">Home</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://huangxunyi.github.io/tags/">Tags</a>
        </li>
      
        <li class="menu-item
           is-active
          
          ">
          <a href="https://huangxunyi.github.io/miscellanea/">Miscellanea</a>
        </li>
      
        <li class="menu-item
          
          
          ">
          <a href="https://huangxunyi.github.io/about/">About</a>
        </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list"><li class="social-item">
          <a href="mailto:ghuangxunyi@gmail.com" title="Email" aria-label="Email">
            <span class="icon icon-email" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//github.com/huangxunyi"target="_blank" rel="me" title="GitHub" aria-label="GitHub">
	    <span class="icon icon-github" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//www.instagram.com/huangxunyi" rel="me" title="Instagram" aria-label="Instagram">
            <span class="icon icon-instagram" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="//weibo.com/weibo_username" rel="me" title="Weibo" aria-label="Weibo">
            <span class="icon icon-weibo" aria-hidden="true"></span>
          </a>
        </li><li class="social-item">
          <a href="https://huangxunyi.github.io/images/qrcode.jpg" target="_blank" rel="me" title="Wechat" aria-label="Wechat">
            <span class="icon icon-wechat" aria-hidden="true"></span>
          </a>
        </li></ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">Miscellanea</h1>
    </header>
    <article class="post-content">

<blockquote>
<p>类似Gist记录一些常用的小坑或者小技巧 或者发一些牢骚 &hellip;</p>

<p>curl -fsSL <a href="https://get.docker.com">https://get.docker.com</a> | bash -s docker &ndash;mirror Aliyun</p>
</blockquote>

<hr />

<h3 id="mysql-远程访问">MySQL 远程访问</h3>

<blockquote>
<p>$ mysql -u {username} -p  -h {ip}  -P {port}</p>

<p>mysql&gt; select host,user,plugin from user;     # use mysql</p>
</blockquote>

<pre><code>+-----------+------------------+-----------------------+
| host      | user             | plugin                |
+-----------+------------------+-----------------------+
| localhost | mysql.infoschema | caching_sha2_password |
| localhost | mysql.session    | caching_sha2_password |
| localhost | mysql.sys        | caching_sha2_password |
| localhost | root             | caching_sha2_password |
+-----------+------------------+-----------------------+

</code></pre>

<p>可以看到 host : 只能是 <code>localhost</code> ,要更加的话</p>

<blockquote>
<p>mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &lsquo;root&rsquo;@&lsquo;%&lsquo;IDENTIFIED BY &lsquo;your-password&rsquo; WITH GRANT OPTION;</p>

<p>mysql&gt; flush privileges;     #更新授权</p>
</blockquote>

<p>此时查看 user表 应该是</p>

<pre><code>+-----------+------------------+-----------------------+
| host      | user             | plugin                |
+-----------+------------------+-----------------------+
| %         | root             | caching_sha2_password |
| localhost | mysql.infoschema | caching_sha2_password |
| localhost | mysql.session    | caching_sha2_password |
| localhost | mysql.sys        | caching_sha2_password |
| localhost | root             | caching_sha2_password |
+-----------+------------------+-----------------------+
</code></pre>

<p>其中 <code>%</code> 表示 所有 类似 <code>0.0.0.0</code> , 这样远程连接就可以通过 <code>username=root</code> <code>password=your-password</code> 访问数据库了.</p>

<p>如果还不能远程连接的话,可以看一下 mysql的 <code>.cnf</code> 文件(<code>/etc/mysql/</code>)中的 <code>bind-address</code> 是不是  <code>127.0.0.1</code> 如果是改成你ip或者 <code>0.0.0.0</code>(表示所有ip) 即可</p>

<hr />

<h3 id="模拟将cpu使用率打满">模拟将CPU使用率打满</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
cat <span style="color:#e6db74">&lt;&lt; EOF &gt; /tmp/infiniteburn.sh
</span><span style="color:#e6db74">#!/bin/bash
</span><span style="color:#e6db74">while true;
</span><span style="color:#e6db74">    do openssl speed;
</span><span style="color:#e6db74">done
</span><span style="color:#e6db74">EOF</span>

<span style="color:#66d9ef">for</span> i in <span style="color:#f92672">{</span><span style="color:#ae81ff">1</span>..32<span style="color:#f92672">}</span>
<span style="color:#66d9ef">do</span>
    nohup /bin/bash /tmp/infiniteburn.sh &amp;
<span style="color:#66d9ef">done</span></code></pre></div>
<hr />

<h3 id="模拟将磁盘io打满">模拟将磁盘IO打满</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
cat <span style="color:#e6db74">&lt;&lt; EOF &gt; /tmp/infiniteburn.sh
</span><span style="color:#e6db74">#!/bin/bash
</span><span style="color:#e6db74">while true;
</span><span style="color:#e6db74">    do openssl speed;
</span><span style="color:#e6db74">done
</span><span style="color:#e6db74">EOF</span>

<span style="color:#66d9ef">for</span> i in <span style="color:#f92672">{</span><span style="color:#ae81ff">1</span>..32<span style="color:#f92672">}</span>
<span style="color:#66d9ef">do</span>
    nohup /bin/bash /tmp/infiniteburn.sh &amp;
<span style="color:#66d9ef">done</span></code></pre></div>
<hr />

<h3 id="scp-ssh">scp ssh</h3>

<blockquote>
<p>$ scp  {源} {目的}
如果是 目录加上 <code>-r</code></p>
</blockquote>

<ul>
<li>发送文件到远程服务器</li>
</ul>

<blockquote>
<p>$ scp 本地文件   user@host:/home/user/{target_dir}</p>
</blockquote>

<ul>
<li>发送目录到远程服务器</li>
</ul>

<blockquote>
<p>$ scp -r 本地文件   user@host:/home/user/{target_dir}</p>
</blockquote>

<ul>
<li>下载远程服务器文件</li>
</ul>

<blockquote>
<p>$ scp  user@host:/home/user/{target_dir}  {local_dir}</p>
</blockquote>

<ul>
<li>下载远程服务器目录</li>
</ul>

<blockquote>
<p>$ scp -r user@host:/home/user/{target_dir}  {local_dir}</p>
</blockquote>

<hr />

<h3 id="vim-没写入权限">vim 没写入权限?</h3>

<p><code>: w ! sudo tee %</code></p>

<p>意思就是 使用<code>tee</code> 把当前文档的所有内容(%)写入文件中</p>

<hr />

<h3 id="javap">javap</h3>

<pre><code>-help  --help  -?        输出此用法消息
 -version                 版本信息，其实是当前javap所在jdk的版本信息，不是class在哪个jdk下生成的。
 -v  -verbose             输出附加信息（包括行号、本地变量表，反汇编等详细信息）
 -l                         输出行号和本地变量表
 -public                    仅显示公共类和成员
 -protected               显示受保护的/公共类和成员
 -package                 显示程序包/受保护的/公共类 和成员 (默认)
 -p  -private             显示所有类和成员
 -c                       对代码进行反汇编
 -s                       输出内部类型签名
 -sysinfo                 显示正在处理的类的系统信息 (路径, 大小, 日期, MD5 散列)
 -constants               显示静态最终常量
 -classpath &lt;path&gt;        指定查找用户类文件的位置
 -bootclasspath &lt;path&gt;    覆盖引导类文件的位置
</code></pre>

<p><code>$  javap -c -l   xxx</code></p>

<ul>
<li><code>ldc</code>:将字符串从运行时常量池压入操作栈中</li>
<li><code>astore</code>:将一个数值从操作栈存入局部变量表</li>
<li><code>dup</code>:复制栈顶的数值并将复制的数值重新压入栈中</li>
<li><code>invokespecial</code>:调用实例构造器方法、私有方法和父类方法</li>
<li><code>invokevirtual</code>:调用实例方法，基于类进行分发</li>
</ul>

<hr />

<h3 id="git-lg">git lg</h3>

<blockquote>
<p>git config &ndash;global alias.lg &ldquo;log &ndash;graph &ndash;pretty=format:&lsquo;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&rsquo; &ndash;abbrev-commit &ndash;date=relative&rdquo;</p>
</blockquote>

<hr />

<h3 id="运行指令直至成功">运行指令直至成功</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">repeat<span style="color:#f92672">(){</span>
  <span style="color:#66d9ef">while</span> true
  <span style="color:#66d9ef">do</span>
    $@  <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">return</span>
  <span style="color:#66d9ef">done</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e"># 原理：该函数通过$@接收传参。如果命令执行成功，则返回并退出循环，否则一直循环</span>

<span style="color:#75715e"># Tips：将该函数加入的shell的rc文件中，方便我们使用</span>

<span style="color:#75715e"># 示例：使用repeat（）从网上下载一个文件，直至成功</span>
repeat <span style="color:#e6db74">`</span>COMMAND<span style="color:#e6db74">`</span></code></pre></div>
<hr />

<h3 id="运行指令直至失败">运行指令直至失败</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">while</span> <span style="color:#e6db74">`</span>COMMAND<span style="color:#e6db74">`</span>; <span style="color:#66d9ef">do</span> :; <span style="color:#66d9ef">done</span></code></pre></div>
<hr />

<h3 id="配置文件复制">配置文件复制</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 设置侦听套接字</span>
$ nc -l <span style="color:#ae81ff">1234</span>

<span style="color:#75715e"># 在另一终端或主机中连接到该套接字</span>
$ nc <span style="color:#ae81ff">127</span>.0.0.1 <span style="color:#ae81ff">1234</span>
message_test

<span style="color:#75715e"># 连接到套接字后就可以在终端中输入信息回车就会发送</span>

<span style="color:#75715e"># 文件复制</span>
在接收端执行以下命令：
$ nc -l <span style="color:#ae81ff">1234</span> &gt; destination_filename
在发送端执行下列命令：
$ nc <span style="color:#ae81ff">127</span>.0.0.1 <span style="color:#ae81ff">1234</span> &lt; source_filename</code></pre></div></article>
    
      
    
  </section>
  
<footer class="site-footer">
  <p>© 2017-2019 Huangxunyi&#39;s Blog</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank" rel="noopener">Nuo</a>.</p>
  
</footer>


<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js"></script>








<script src="https://huangxunyi.github.io/scripts/index.min.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('\/service-worker.js').then(function() {
      console.log('[ServiceWorker] Registered');
    });
  }
</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-143867762-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







  </body>
</html>
